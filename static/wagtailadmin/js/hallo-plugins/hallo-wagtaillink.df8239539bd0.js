!function(){"use strict";var e,t={34827:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=o(n(73609));r.default.widget("IKS.hallowagtaillink",{options:{uuid:"",editable:null},populateToolbar:function(e){var t=this,n=function(){var e=t.options.editable.getSelection().commonAncestorContainer;return r.default(e).parents("a").get(0)},o=r.default('<span class="'+this.widgetName+'"></span>'),i=r.default("<span></span>");(i=i.hallobutton({uuid:t.options.uuid,editable:t.options.editable,label:"Add/Edit Link",icon:"icon-link",command:null,queryState:function(){return i.hallobutton("checked",!!n())}})).on("click",(function(){var e,o,i,a=window.chooserUrls.pageChooser,l={allow_external_link:!0,allow_email_link:!0,allow_phone_link:!0,allow_anchor_link:!0},u=n(),s=t.options.editable.getSelection();return u?(e=u.getAttribute("href"),i=u.getAttribute("data-parent-id"),o=u.getAttribute("data-linktype"),l.link_text=u.innerText,"page"===o&&i?a=window.chooserUrls.pageChooser+i.toString()+"/":e.startsWith("mailto:")?(a=window.chooserUrls.emailLinkChooser,e=e.replace("mailto:",""),l.link_url=e):e.startsWith("tel:")?(a=window.chooserUrls.phoneLinkChooser,e=e.replace("tel:",""),l.link_url=e):e.startsWith("#")?(a=window.chooserUrls.anchorLinkChooser,e=e.replace("#",""),l.link_url=e):o||(a=window.chooserUrls.externalLinkChooser,l.link_url=e)):s.collapsed||(l.link_text=s.toString()),ModalWorkflow({url:a,urlParams:l,onload:PAGE_CHOOSER_MODAL_ONLOAD_HANDLERS,responses:{pageChosen:function(e){var n,o;return u?(n=u,o=!0):s.collapsed?(n=document.createElement("a"),s.insertNode(n),o=!1):(n=document.createElement("a"),s.surroundContents(n),r.default("a[href]",n).each((function(){for(var e=this.parentNode;this.firstChild;)e.insertBefore(this.firstChild,this);e.removeChild(this)})),o=!0),n.setAttribute("href",e.url),e.id?(n.setAttribute("data-id",e.id),n.setAttribute("data-parent-id",e.parentId),n.setAttribute("data-linktype","page")):(n.removeAttribute("data-id"),n.removeAttribute("data-parent-id"),n.removeAttribute("data-linktype")),!e.prefer_this_title_as_link_text&&o||(n.innerText=e.title),t.options.editable.element.trigger("change")}}})})),o.append(i);var a=r.default("<span></span>");(a=a.hallobutton({uuid:t.options.uuid,editable:t.options.editable,label:"Remove Link",icon:"icon-chain-broken",command:null,queryState:function(){return n()?a.hallobutton("enable"):a.hallobutton("disable")}})).on("click",(function(){var e,o;n()&&((o=(e=rangy.getSelection()).getRangeAt(0)).setStartBefore(e.anchorNode.parentNode),o.setEndAfter(e.anchorNode.parentNode),e.setSingleRange(o,!1),document.execCommand("unlink"),t.options.editable.element.trigger("change"))})),o.append(a),o.hallobuttonset(),e.append(o)}})},73609:function(e){e.exports=jQuery}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=t,e=[],o.O=function(t,n,r,i){if(!n){var a=1/0;for(s=0;s<e.length;s++){n=e[s][0],r=e[s][1],i=e[s][2];for(var l=!0,u=0;u<n.length;u++)(!1&i||a>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[u])}))?n.splice(u--,1):(l=!1,i<a&&(a=i));l&&(e.splice(s--,1),t=r())}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,r,i]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=846,function(){var e={846:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,a=n[0],l=n[1],u=n[2],s=0;for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(u)var d=u(o);for(t&&t(n);s<a.length;s++)i=a[s],o.o(e,i)&&e[i]&&e[i][0](),e[a[s]]=0;return o.O(d)},n=self.webpackChunkwagtail=self.webpackChunkwagtail||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),o.O(void 0,[751],(function(){return o(34827)}));var r=o.O(void 0,[751],(function(){return o(90971)}));r=o.O(r)}();
//# sourceMappingURL=hallo-wagtaillink.js.map